# ValidatingWebhookConfiguration
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: openobserve-validating-webhook
  labels:
    app: openobserve-operator
webhooks:
- name: validate.alerts.openobserve.ai
  clientConfig:
    service:
      name: openobserve-webhook-service
      namespace: o2operator
      path: /validate-openobserve-ai-v1alpha1-openobservealert
    # CA bundle will be injected by the operator or cert-manager
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJekNDQWd1Z0F3SUJBZ0lVSUw4QUlMa1BEWHdlWVBkRmRHQUMwY2RPQ29vd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lURWZNQjBHQTFVRUF3d1diM0JsYm05aWMyVnlkbVV0ZDJWaWFHOXZheTFqWVRBZUZ3MHlOVEV5TURFdwpOakl6TURoYUZ3MHpOVEV4TWprd05qSXpNRGhhTUNFeEh6QWRCZ05WQkFNTUZtOXdaVzV2WW5ObGNuWmxMWGRsClltaHZiMnN0WTJFd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUMyYWx1Wm4wNHIKSWxRR2YvTFFTbFA2czJuM050MmdkSmRIaVVlVnBZc05VQ1FXMlpTdG5GWStsbzN3clEydW9OQ2JBdkV1ZkZXbQp1aTFSb1RHWWdQU24vK1U1U05RbFowQlZGV3F5Uk5zM1hyOUhiTlJJS2JrVFgwQlRMWlFwRGFNSVNVZi9FSmNrCjlCWnBmcjNiVHh1YSs0SGU1NWJXSTV1aDVURG1ZaHdTMVU2SkI0anQ3eElvSEppdlQ1RXhnaCtlRkdsZ1gzZkYKOSs3MGtsVFo3NjNJWkxNWmRNSlVnTjRsN0tUZWZBT3dwdldBdlRZVy9nVDc2WGtQYnBIOFJUaCtHODB1QmFnQgpWRU1Ob3F5ZC9sdWY2ZHEvNjN6SHBSTG5OVkNITW1Yc1owMDdheE1ZWTVFdWxQdWozN3dBcDhRbWtiUXhoRFMzCmhzRWVBMHByZTJTRkFnTUJBQUdqVXpCUk1CMEdBMVVkRGdRV0JCU2w1NmtDNGVHV2s1Z1hsNXNHcm9oR3ZvajQKekRBZkJnTlZIU01FR0RBV2dCU2w1NmtDNGVHV2s1Z1hsNXNHcm9oR3ZvajR6REFQQmdOVkhSTUJBZjhFQlRBRApBUUgvTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFCbG53bWROczJkRUE1bC9MUWQ2V1EwOUJQQ2wrOGt5czE5Cnl6T2hhZU5xSndleHRTTFQ4a3ozcnF5ejc5cFZSV3p6NitLWmgxWFVuTVBKZVlVdXRSWjVoQlE1ZUlsT3dIZkIKS2o1dHVkVGkzZEc2QjlZamFoUFB4Mm5PWmo5Yjh2Q1BCVlJ3WHBaRmVSVUFTdUNXak5sWkcxT2pEd3dLejlaRAoyNEd2UmhBbGdVd1hBWCtkb25IU0NBQVFicnVRVFFmU204djNvNFA0b0V1Sk44QithTjBRc0JIU1F6eUN6OVlICm1wSEVzNm1ZcTFXN2Z3b3JiaG9CM1VmQnNTa3VNL3FubkM1UlhJOHNoVzA4ZmZLWG9YR0NNZlRwMVk2dVZqY1oKd3lpQkxzNjdvTUI3OTVDWXJvWFoyVm9pSnJnS29nTzUvRFBSTmZ6M3RVYUVOMk9xVXN4cgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  rules:
  - apiGroups:
    - openobserve.ai
    apiVersions:
    - v1alpha1
    resources:
    - openobservealerts
    operations:
    - CREATE
    - UPDATE
    - DELETE
  admissionReviewVersions:
  - v1
  - v1beta1
  sideEffects: None
  failurePolicy: Fail
  timeoutSeconds: 10

- name: validate.pipelines.openobserve.ai
  clientConfig:
    service:
      name: openobserve-webhook-service
      namespace: o2operator
      path: /validate-openobserve-ai-v1alpha1-openobservepipeline
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJekNDQWd1Z0F3SUJBZ0lVSUw4QUlMa1BEWHdlWVBkRmRHQUMwY2RPQ29vd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lURWZNQjBHQTFVRUF3d1diM0JsYm05aWMyVnlkbVV0ZDJWaWFHOXZheTFqWVRBZUZ3MHlOVEV5TURFdwpOakl6TURoYUZ3MHpOVEV4TWprd05qSXpNRGhhTUNFeEh6QWRCZ05WQkFNTUZtOXdaVzV2WW5ObGNuWmxMWGRsClltaHZiMnN0WTJFd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUMyYWx1Wm4wNHIKSWxRR2YvTFFTbFA2czJuM050MmdkSmRIaVVlVnBZc05VQ1FXMlpTdG5GWStsbzN3clEydW9OQ2JBdkV1ZkZXbQp1aTFSb1RHWWdQU24vK1U1U05RbFowQlZGV3F5Uk5zM1hyOUhiTlJJS2JrVFgwQlRMWlFwRGFNSVNVZi9FSmNrCjlCWnBmcjNiVHh1YSs0SGU1NWJXSTV1aDVURG1ZaHdTMVU2SkI0anQ3eElvSEppdlQ1RXhnaCtlRkdsZ1gzZkYKOSs3MGtsVFo3NjNJWkxNWmRNSlVnTjRsN0tUZWZBT3dwdldBdlRZVy9nVDc2WGtQYnBIOFJUaCtHODB1QmFnQgpWRU1Ob3F5ZC9sdWY2ZHEvNjN6SHBSTG5OVkNITW1Yc1owMDdheE1ZWTVFdWxQdWozN3dBcDhRbWtiUXhoRFMzCmhzRWVBMHByZTJTRkFnTUJBQUdqVXpCUk1CMEdBMVVkRGdRV0JCU2w1NmtDNGVHV2s1Z1hsNXNHcm9oR3ZvajQKekRBZkJnTlZIU01FR0RBV2dCU2w1NmtDNGVHV2s1Z1hsNXNHcm9oR3ZvajR6REFQQmdOVkhSTUJBZjhFQlRBRApBUUgvTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFCbG53bWROczJkRUE1bC9MUWQ2V1EwOUJQQ2wrOGt5czE5Cnl6T2hhZU5xSndleHRTTFQ4a3ozcnF5ejc5cFZSV3p6NitLWmgxWFVuTVBKZVlVdXRSWjVoQlE1ZUlsT3dIZkIKS2o1dHVkVGkzZEc2QjlZamFoUFB4Mm5PWmo5Yjh2Q1BCVlJ3WHBaRmVSVUFTdUNXak5sWkcxT2pEd3dLejlaRAoyNEd2UmhBbGdVd1hBWCtkb25IU0NBQVFicnVRVFFmU204djNvNFA0b0V1Sk44QithTjBRc0JIU1F6eUN6OVlICm1wSEVzNm1ZcTFXN2Z3b3JiaG9CM1VmQnNTa3VNL3FubkM1UlhJOHNoVzA4ZmZLWG9YR0NNZlRwMVk2dVZqY1oKd3lpQkxzNjdvTUI3OTVDWXJvWFoyVm9pSnJnS29nTzUvRFBSTmZ6M3RVYUVOMk9xVXN4cgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  rules:
  - apiGroups:
    - openobserve.ai
    apiVersions:
    - v1alpha1
    resources:
    - openobservepipelines
    operations:
    - CREATE
    - UPDATE
    - DELETE
  admissionReviewVersions:
  - v1
  - v1beta1
  sideEffects: None
  failurePolicy: Fail
  timeoutSeconds: 10

- name: validate.configs.openobserve.ai
  clientConfig:
    service:
      name: openobserve-webhook-service
      namespace: o2operator
      path: /validate-openobserve-ai-v1alpha1-openobserveconfig
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJekNDQWd1Z0F3SUJBZ0lVSUw4QUlMa1BEWHdlWVBkRmRHQUMwY2RPQ29vd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lURWZNQjBHQTFVRUF3d1diM0JsYm05aWMyVnlkbVV0ZDJWaWFHOXZheTFqWVRBZUZ3MHlOVEV5TURFdwpOakl6TURoYUZ3MHpOVEV4TWprd05qSXpNRGhhTUNFeEh6QWRCZ05WQkFNTUZtOXdaVzV2WW5ObGNuWmxMWGRsClltaHZiMnN0WTJFd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUMyYWx1Wm4wNHIKSWxRR2YvTFFTbFA2czJuM050MmdkSmRIaVVlVnBZc05VQ1FXMlpTdG5GWStsbzN3clEydW9OQ2JBdkV1ZkZXbQp1aTFSb1RHWWdQU24vK1U1U05RbFowQlZGV3F5Uk5zM1hyOUhiTlJJS2JrVFgwQlRMWlFwRGFNSVNVZi9FSmNrCjlCWnBmcjNiVHh1YSs0SGU1NWJXSTV1aDVURG1ZaHdTMVU2SkI0anQ3eElvSEppdlQ1RXhnaCtlRkdsZ1gzZkYKOSs3MGtsVFo3NjNJWkxNWmRNSlVnTjRsN0tUZWZBT3dwdldBdlRZVy9nVDc2WGtQYnBIOFJUaCtHODB1QmFnQgpWRU1Ob3F5ZC9sdWY2ZHEvNjN6SHBSTG5OVkNITW1Yc1owMDdheE1ZWTVFdWxQdWozN3dBcDhRbWtiUXhoRFMzCmhzRWVBMHByZTJTRkFnTUJBQUdqVXpCUk1CMEdBMVVkRGdRV0JCU2w1NmtDNGVHV2s1Z1hsNXNHcm9oR3ZvajQKekRBZkJnTlZIU01FR0RBV2dCU2w1NmtDNGVHV2s1Z1hsNXNHcm9oR3ZvajR6REFQQmdOVkhSTUJBZjhFQlRBRApBUUgvTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFCbG53bWROczJkRUE1bC9MUWQ2V1EwOUJQQ2wrOGt5czE5Cnl6T2hhZU5xSndleHRTTFQ4a3ozcnF5ejc5cFZSV3p6NitLWmgxWFVuTVBKZVlVdXRSWjVoQlE1ZUlsT3dIZkIKS2o1dHVkVGkzZEc2QjlZamFoUFB4Mm5PWmo5Yjh2Q1BCVlJ3WHBaRmVSVUFTdUNXak5sWkcxT2pEd3dLejlaRAoyNEd2UmhBbGdVd1hBWCtkb25IU0NBQVFicnVRVFFmU204djNvNFA0b0V1Sk44QithTjBRc0JIU1F6eUN6OVlICm1wSEVzNm1ZcTFXN2Z3b3JiaG9CM1VmQnNTa3VNL3FubkM1UlhJOHNoVzA4ZmZLWG9YR0NNZlRwMVk2dVZqY1oKd3lpQkxzNjdvTUI3OTVDWXJvWFoyVm9pSnJnS29nTzUvRFBSTmZ6M3RVYUVOMk9xVXN4cgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  rules:
  - apiGroups:
    - openobserve.ai
    apiVersions:
    - v1alpha1
    resources:
    - openobserveconfigs
    operations:
    - CREATE
    - UPDATE
    - DELETE
  admissionReviewVersions:
  - v1
  - v1beta1
  sideEffects: None
  failurePolicy: Fail
  timeoutSeconds: 10

- name: validate.functions.openobserve.ai
  clientConfig:
    service:
      name: openobserve-webhook-service
      namespace: o2operator
      path: /validate-openobserve-ai-v1alpha1-openobservefunction
    caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJekNDQWd1Z0F3SUJBZ0lVSUw4QUlMa1BEWHdlWVBkRmRHQUMwY2RPQ29vd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0lURWZNQjBHQTFVRUF3d1diM0JsYm05aWMyVnlkbVV0ZDJWaWFHOXZheTFqWVRBZUZ3MHlOVEV5TURFdwpOakl6TURoYUZ3MHpOVEV4TWprd05qSXpNRGhhTUNFeEh6QWRCZ05WQkFNTUZtOXdaVzV2WW5ObGNuWmxMWGRsClltaHZiMnN0WTJFd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUMyYWx1Wm4wNHIKSWxRR2YvTFFTbFA2czJuM050MmdkSmRIaVVlVnBZc05VQ1FXMlpTdG5GWStsbzN3clEydW9OQ2JBdkV1ZkZXbQp1aTFSb1RHWWdQU24vK1U1U05RbFowQlZGV3F5Uk5zM1hyOUhiTlJJS2JrVFgwQlRMWlFwRGFNSVNVZi9FSmNrCjlCWnBmcjNiVHh1YSs0SGU1NWJXSTV1aDVURG1ZaHdTMVU2SkI0anQ3eElvSEppdlQ1RXhnaCtlRkdsZ1gzZkYKOSs3MGtsVFo3NjNJWkxNWmRNSlVnTjRsN0tUZWZBT3dwdldBdlRZVy9nVDc2WGtQYnBIOFJUaCtHODB1QmFnQgpWRU1Ob3F5ZC9sdWY2ZHEvNjN6SHBSTG5OVkNITW1Yc1owMDdheE1ZWTVFdWxQdWozN3dBcDhRbWtiUXhoRFMzCmhzRWVBMHByZTJTRkFnTUJBQUdqVXpCUk1CMEdBMVVkRGdRV0JCU2w1NmtDNGVHV2s1Z1hsNXNHcm9oR3ZvajQKekRBZkJnTlZIU01FR0RBV2dCU2w1NmtDNGVHV2s1Z1hsNXNHcm9oR3ZvajR6REFQQmdOVkhSTUJBZjhFQlRBRApBUUgvTUEwR0NTcUdTSWIzRFFFQkN3VUFBNElCQVFCbG53bWROczJkRUE1bC9MUWQ2V1EwOUJQQ2wrOGt5czE5Cnl6T2hhZU5xSndleHRTTFQ4a3ozcnF5ejc5cFZSV3p6NitLWmgxWFVuTVBKZVlVdXRSWjVoQlE1ZUlsT3dIZkIKS2o1dHVkVGkzZEc2QjlZamFoUFB4Mm5PWmo5Yjh2Q1BCVlJ3WHBaRmVSVUFTdUNXak5sWkcxT2pEd3dLejlaRAoyNEd2UmhBbGdVd1hBWCtkb25IU0NBQVFicnVRVFFmU204djNvNFA0b0V1Sk44QithTjBRc0JIU1F6eUN6OVlICm1wSEVzNm1ZcTFXN2Z3b3JiaG9CM1VmQnNTa3VNL3FubkM1UlhJOHNoVzA4ZmZLWG9YR0NNZlRwMVk2dVZqY1oKd3lpQkxzNjdvTUI3OTVDWXJvWFoyVm9pSnJnS29nTzUvRFBSTmZ6M3RVYUVOMk9xVXN4cgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  rules:
  - apiGroups:
    - openobserve.ai
    apiVersions:
    - v1alpha1
    resources:
    - openobservefunctions
    operations:
    - CREATE
    - UPDATE
    - DELETE
  admissionReviewVersions:
  - v1
  - v1beta1
  sideEffects: None
  failurePolicy: Fail
  timeoutSeconds: 10